function hideMobileMenu(){jQuery(".navbar-collapse").removeClass("in").addClass("collapse")}var app=angular.module("movieApp",["ngRoute"]);app.config(["$httpProvider",function(e){e.defaults.headers.common["X-Requested-With"]="XMLHttpRequest"}]),app.run(["$http","$rootScope","$timeout",function(e,o,t){e.get("/Home/StartNotificationService"),o.$on("$routeChangeStart",function(){$("#page-loader").show()}),o.$on("$routeChangeSuccess",function(){t(function(){$("#page-loader").hide()}),hideMobileMenu()})}]);var MovieApp;!function(e){var o=function(){function e(e,o,t){var i=this;this.$scope=e,this.$location=o,this.downloadListRepository=t,this.search={movieName:""},this.$scope.$on("$locationChangeSuccess",function(){i.setActiveUrlPart()}),e.movieTypeFilter=3,t.GetMoviesToDownload().then(function(e){i.$scope.moviesToDownload=e}),e.$on("onDragStart",function(){i.dragPending=!0}),e.$on("onDragDrop",function(e,o){var t=angular.fromJson(o);i.downloadListRepository.IsMovieInDownloadList(t)||(i.downloadListRepository.AddMovieToDownloadList(t),i.$scope.moviesToDownload.push(t)),i.dragPending=!1})}return e.prototype.setActiveUrlPart=function(){var e=this.$location.path().split("/");this.$scope.active=e[1]},e.prototype.deleteMovieFromDownloadList=function(e){var o=this;this.downloadListRepository.DeleteMovieFromDownloadList(e).then(function(){angular.copy(_.without(o.$scope.moviesToDownload,e),o.$scope.moviesToDownload)})},Object.defineProperty(e.prototype,"moviesToDownload",{get:function(){return this.$scope.moviesToDownload},enumerable:!0,configurable:!0}),e.prototype.markMovieAsDownloaded=function(e){e.Downloaded=!0},e.prototype.searchMovie=function(){this.$location.path("/Movie/Search/"+this.search.movieName)},e.$inject=["$scope","$location","DownloadListRepository"],e}();e.HomeController=o}(MovieApp||(MovieApp={})),app.controller("HomeController",MovieApp.HomeController),app.config(["$routeProvider",function(e){e.when("/Cinema",{templateUrl:"/Partials/Movie/MovieOverview.html",controller:"MovieOverviewController",controllerAs:"movieCtrl",resolve:{movies:["MovieService",function(e){return e.GetMoviesInCinema()}]}}).when("/SoonInCinema",{templateUrl:"/Partials/Movie/MovieOverview.html",controller:"MovieOverviewController",controllerAs:"movieCtrl",resolve:{movies:["MovieService",function(e){return e.GetMoviesSoonInCinema()}]}}).when("/Rent",{templateUrl:"/Partials/Movie/MovieOverview.html",controller:"MovieOverviewController",controllerAs:"movieCtrl",resolve:{movies:["MovieService",function(e){return e.GetMoviesForRent()}]}}).when("/Movie/:imdb",{templateUrl:"/Partials/Movie/Movie-Details.html",controller:"MovieController",controllerAs:"movieCtrl",resolve:{movie:["$route","MovieService",function(e,o){return o.GetMovieByImdb(e.current.params.imdb)}]}}).when("/Movie/Search/:movieName",{templateUrl:"/Partials/Movie/SearchResults.html",controller:"MovieSearchController",controllerAs:"movieCtrl",resolve:{movies:["$route","MovieService",function(e,o){return o.SearchMovie(e.current.params.movieName)}]}}).otherwise({redirectTo:"/Rent"})}]);var MovieApp;!function(e){var o=function(){function e(e,o,t){this.$http=e,this.$q=o,this.$window=t,this.GetMoviesToDownload=function(){var e=this;return this.$http.get("/api/DownloadList/").then(function(o){return e.downloadList=o.data,e.downloadList})},this.DeleteMovieFromDownloadList=function(e){var o=this;return this.$http.delete("/api/DownloadList/"+e.Imdb).then(function(t){return angular.copy(_.without(o.downloadList,e),o.downloadList),t})},this.downloadList=new Array}return e.prototype.AddMovieToDownloadList=function(e){var o=this;return this.$http.post("/api/DownloadList/",e).then(function(){o.downloadList.push(e)})},e.prototype.IsMovieInDownloadList=function(e){var o=_.findWhere(this.downloadList,{Imdb:e.Imdb});return angular.isDefined(o)},e.$inject=["$http","$q","$window"],e}();e.DownloadListRepository=o}(MovieApp||(MovieApp={})),app.service("DownloadListRepository",MovieApp.DownloadListRepository);var MovieApp;!function(e){var o=function(){function e(){}return e.prototype.AddMovieToDownloadList=function(){},e}();e.DownloadListService=o}(MovieApp||(MovieApp={})),app.service("DownloadListService",MovieApp.DownloadListService);var MovieApp;!function(e){var o=function(){function e(){}return Object.defineProperty(e.prototype,"Title",{get:function(){return this._title},set:function(e){this._title=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"MovieType",{get:function(){return this._movieType},set:function(e){this._movieType=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Imdb",{get:function(){return this._imdb},set:function(e){this._imdb=e},enumerable:!0,configurable:!0}),e}();e.MovieBase=o}(MovieApp||(MovieApp={}));var MovieApp;!function(e){var o=function(){function e(){}return Object.defineProperty(e.prototype,"Title",{get:function(){return this._title},set:function(e){this._title=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"MovieType",{get:function(){return this._movieType},set:function(e){this._movieType=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Imdb",{get:function(){return this._imdb},set:function(e){this._imdb=e},enumerable:!0,configurable:!0}),e}();e.MovieToFollow=o}(MovieApp||(MovieApp={}));var MovieApp;!function(e){function o(){return{restrict:"E",replace:!0,scope:{movies:"="},templateUrl:"/Partials/Movie/MovieOverview.html",link:function(){}}}e.MovieOverview=o}(MovieApp||(MovieApp={})),app.directive("movieOverview",MovieApp.MovieOverview);var MovieApp;!function(e){var o=function(){function e(e,o,t,i){this.$scope=e,this.movies=o,this.downloadListRepository=t,this.moviePosterFactory=i,this.$scope.movies=[];for(var r in this.movies){var n=this.movies[r],a={date:r,movies:n};this.$scope.movies.push(a)}var s=Math.floor(Math.random()*this.$scope.movies.length),p=Math.floor(Math.random()*this.$scope.movies[s].movies.length),v=this.$scope.movies[s].movies[p].Imdb;this.moviePosterFactory.GetLargeMoviePoster(v).then(function(e){var o="<style>#overview-background:before{background-image:url("+e+")}</style>";$("#overview-background").append(o)})}return e.prototype.addMovieToDownloadList=function(e){this.downloadListRepository.AddMovieToDownloadList(e)},e.prototype.deleteMovieFromDownloadList=function(e){this.downloadListRepository.DeleteMovieFromDownloadList(e).then(function(){})},e.prototype.IsMoviePresentInDownloadlist=function(e){return this.downloadListRepository.IsMovieInDownloadList(e)},e.$inject=["$scope","movies","DownloadListRepository","moviePosterFactory"],e}();e.MovieOverviewController=o,app.controller("MovieOverviewController",e.MovieOverviewController)}(MovieApp||(MovieApp={}));var MovieApp;!function(e){var o=function(){function e(){}return Object.defineProperty(e.prototype,"Url",{get:function(){return this._url},set:function(e){this._url=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Year",{get:function(){return this._year},set:function(e){this._year=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Thumbnail",{get:function(){return this._thumbnail},set:function(e){this._thumbnail=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Plot",{get:function(){return this._plot},set:function(e){this._plot=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Duration",{get:function(){return this._duration},set:function(e){this._duration=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Downloaded",{get:function(){return this._downloaded},set:function(e){this._downloaded=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Title",{get:function(){return this._title},set:function(e){this._title=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"MovieType",{get:function(){return this._movieType},set:function(e){this._movieType=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Imdb",{get:function(){return this._imdb},set:function(e){this._imdb=e},enumerable:!0,configurable:!0}),e}();e.Movie=o}(MovieApp||(MovieApp={}));var MovieApp;!function(e){var o=function(){function e(e,o,t,i){this.$scope=e,this.$routeParams=o,this.MovieService=t,this.movie=i,this.vm={viewtype:{carousel:!1,mobile:!0}},_.isString(i)?(this.vm.viewtype.carousel=!1,this.vm.viewtype.mobile=!1,this.showError=!0):this.movieDetails=this.movie}return e.$inject=["$scope","$routeParams","MovieService","movie"],e}();e.MovieController=o,app.controller("MovieController",e.MovieController)}(MovieApp||(MovieApp={}));var MovieApp;!function(e){function o(){return{restrict:"E",templateUrl:"/Partials/Movie/Movie-Details-Carousel.html",link:function(){}}}e.MovieDetailsCarousel=o}(MovieApp||(MovieApp={})),app.directive("movieDetailsCarousel",MovieApp.MovieDetailsCarousel);var MovieApp;!function(e){function o(){return{restrict:"E",replace:!0,templateUrl:"/Partials/Movie/Movie-Details-Mobile.html",link:function(){}}}e.MovieDetailsMobile=o}(MovieApp||(MovieApp={})),app.directive("movieDetailsMobile",MovieApp.MovieDetailsMobile);var MovieApp;!function(e){function o(e){return{restrict:"E",replace:!0,scope:{imdb:"@"},link:function(o,t){if(o.imdb){var i=new Image;e.GetMoviePoster(o.imdb).then(function(e){i.src=e,i.style.height="530px",t.parent().append(i),t.remove()})}}}}e.MoviePoster=o}(MovieApp||(MovieApp={})),MovieApp.MoviePoster.$inject=["moviePosterFactory"],app.directive("moviePoster",MovieApp.MoviePoster);var MovieApp;!function(e){var o=function(){function e(e){this.$q=e,this.baseUrlMovie="https://api.themoviedb.org/3/movie/",this.baseUrlImage="http://image.tmdb.org/t/p/w",this.apikey="980071c1008d3dd64ab4a0893fe5a727"}return e.prototype.GetMoviePoster=function(e){var o=this.baseUrlMovie+e+"?api_key="+this.apikey,t=this.$q.defer();return $.get(o,function(e){var o="http://image.tmdb.org/t/p/w500"+e.poster_path;t.resolve(o)}),t.promise},e.prototype.GetLargeMoviePoster=function(e){var o=this.baseUrlMovie+e+"?api_key="+this.apikey,t=this.$q.defer();return $.get(o,function(e){var o="http://image.tmdb.org/t/p/w500"+e.poster_path;t.resolve(o)}),t.promise},e.prototype.GetMovieThumb=function(e){var o=this.baseUrlMovie+e+"?api_key="+this.apikey,t=this.$q.defer();return $.get(o,function(e){var o="http://image.tmdb.org/t/p/w154"+e.poster_path;t.resolve(o)}),t.promise},e.MoviePosterFactoryCreator=function(o){return new e(o)},e}();e.MoviePosterFactory=o}(MovieApp||(MovieApp={})),MovieApp.MoviePosterFactory.MoviePosterFactoryCreator.$inject=["$q"],app.factory("moviePosterFactory",MovieApp.MoviePosterFactory.MoviePosterFactoryCreator);var MovieApp;!function(e){var o=function(){function e(e,o){this.$scope=e,this.movies=o,this.$scope.movies=o}return e.$inject=["$scope","movies"],e}();e.MovieSearchController=o,app.controller("MovieSearchController",e.MovieSearchController)}(MovieApp||(MovieApp={}));var MovieApp;!function(e){var o=function(){function e(e,o,t,i){this.$http=e,this.$q=o,this.$window=t,this.$location=i,this.GetMovieByImdb=function(e){return this.HandleGetRequest("api/Movie?movieMeterId="+e).then(function(e){return e},function(e){return e.data})},this.SearchMovie=function(e){return this.HandleGetRequest("api/Movie/search?movieName="+e).then(function(e){return e})},this.GetMoviesForRent=function(){var e=this.$q.defer(),o=this.$window.sessionStorage.getItem("movies");if(o){var t=angular.fromJson(o);e.resolve(t)}else this.HandleGetRequest("/api/Rent").then(function(o){var t=angular.toJson(o);sessionStorage.setItem("movies",t),e.resolve(o)});return e.promise},this.GetMoviesInCinema=function(){var e=this.$q.defer(),o=sessionStorage.getItem("cinemaMovies");if(o){var t=angular.fromJson(o);e.resolve(t)}else this.HandleGetRequest("api/Cinema").then(function(o){var t=angular.toJson(o);sessionStorage.setItem("cinemaMovies",t),e.resolve(o)});return e.promise},this.GetMoviesSoonInCinema=function(){var e,o=this.$q.defer();if(e){var t=angular.fromJson(e);o.resolve(t)}else this.HandleGetRequest("api/SoonInCinema").then(function(e){var t=angular.toJson(e);sessionStorage.setItem("soonInCinemaMovies",t),o.resolve(e)});return o.promise},this.GetMoviePoster=function(e){return this.$http.get("https://api.themoviedb.org/3/movie/tt"+e+"?api_key=980071c1008d3dd64ab4a0893fe5a727").then(function(e){return e.data})}}return e.prototype.ClearSessionStorage=function(){sessionStorage.clear()},e.prototype.HandleGetRequest=function(e){return this.$http.get(e).then(function(e){return e.data})},e.$inject=["$http","$q","$window","$location"],e}();e.MovieService=o}(MovieApp||(MovieApp={})),app.service("MovieService",MovieApp.MovieService);var MovieApp;!function(e){function o(e){return{restrict:"E",replace:!0,scope:{imdb:"@"},link:function(o,t){var i=new Image;e.GetMovieThumb(o.imdb).then(function(e){i.src=e,t.parent().append(i),t.remove()})}}}e.MovieThumb=o}(MovieApp||(MovieApp={})),MovieApp.MovieThumb.$inject=["moviePosterFactory"],app.directive("movieThumb",MovieApp.MovieThumb);var MovieApp;!function(e){function o(e){return{restrict:"A",compile:function(o){return o.attr("ng-mouseover","showHover($event, y)"),o.attr("ng-mouseleave","hideHover()"),o.removeAttr("movie-tooltip"),{post:function(o,t){function i(t,i){angular.element("#movieTooltip").remove();var r=400+i;r>=window.innerWidth&&(i-=400);var n='<div class="movie-tooltip" id="movieTooltip" style="top:'+t+"px; left:"+i+'px;"><div style="font-size:0.8em;float:right;">Duur: {{movie.Duration}}min.</div><b>{{movie.Title}}</b><br/>{{movie.Plot}}</div>',a=e(n)(o);angular.element("body").append($(a))}e(t)(o),o.showHover=function(e,t){o.movie=t,i(e.pageY,e.pageX)},o.hideHover=function(){angular.element("#movieTooltip").remove()}}}}}}e.MovieTooltip=o,o.$inject=["$compile"]}(MovieApp||(MovieApp={})),app.directive("movieTooltip",MovieApp.MovieTooltip);var MovieApp;!function(e){function o(){return{restrict:"E",replace:!0,scope:{url:"@"},link:function(e,o){if(e.url){var t=document.createElement("IFRAME");t.src=e.url,t.width="680px",t.height="383px",t.frameBorder="0",t.scrolling="false",o.parent().append(t),o.remove()}}}}e.MovieTrailer=o}(MovieApp||(MovieApp={})),app.directive("movieTrailer",MovieApp.MovieTrailer);var MovieApp;!function(e){function o(e){return{restrict:"A",link:function(o,t,i){var r=t[0];r.draggable=!0,r.addEventListener("dragstart",function(o){return o.dataTransfer.effectAllowed="copy",o.dataTransfer.setData("Text",i.draggable),this.classList.add("drag"),e.$apply(function(){e.$broadcast("onDragStart","")}),!1},!1),r.addEventListener("dragend",function(){return this.classList.remove("drag"),!1},!1)}}}e.Draggable=o}(MovieApp||(MovieApp={})),app.directive("draggable",MovieApp.Draggable);var MovieApp;!function(e){function o(e){return{scope:{},link:function(o,t){var i=t[0];i.addEventListener("dragover",function(e){return e.dataTransfer.dropEffect="copy",e.preventDefault&&e.preventDefault(),this.classList.add("over"),!1},!1),i.addEventListener("dragenter",function(){return this.classList.add("over"),!1},!1),i.addEventListener("dragleave",function(){return this.classList.remove("over"),!1},!1),i.addEventListener("drop",function(o){return o.stopPropagation&&o.stopPropagation(),this.classList.remove("over"),e.$apply(function(){e.$broadcast("onDragDrop",o.dataTransfer.getData("Text"))}),!1},!1)}}}e.Droppable=o}(MovieApp||(MovieApp={})),app.directive("droppable",MovieApp.Droppable);
//# sourceMappingURL=maps/all.min.js.map